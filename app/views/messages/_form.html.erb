<div class="card shadow-sm border-0">
    <div class="card-body p-4">
        <div class="d-flex align-items-center justify-content-between mb-3">
            <h2 class="h5 mb-0">Message submission</h2>
            <span class="badge bg-light text-dark border">Form</span>
        </div>

        <%= form_with model: message, url: messages_path, method: :post, html: { novalidate: true } do |f| %>
        <% if message.errors.any? %>
        <div class="alert alert-danger mb-3" role="alert">
            <div class="fw-semibold mb-2">Please fix the errors below:</div>
            <ul class="mb-0 ps-3">
                <% message.errors.full_messages.each do |msg| %>
                <li><%= msg %></li>
                <% end %>
            </ul>
        </div>
        <% end %>

        <div class="row g-3">
            <div class="col-12 col-md-4">
                <%= f.label :category, class: "form-label" %>
                <%= f.select :category,
                       options_for_select(categories.map { |c| [c.titleize, c] }, f.object.category),
                       {},
                       class: "form-select" %>
                <div class="form-text">Choose one of the available categories.</div>
            </div>

            <div class="col-12 col-md-8">
                <%= f.label :body, "Message", class: "form-label" %>
                <%= f.text_area :body,
                          rows: 4,
                          placeholder: "Type your message...",
                          class: "form-control" %>
                <div class="form-text">Message body cannot be blank or whitespace-only.</div>
            </div>

            <div class="col-12 d-flex justify-content-end">
                <%= f.submit "Send and Dispatch", class: "btn btn-primary" %>
            </div>
        </div>
        <% end %>
    </div>
</div>